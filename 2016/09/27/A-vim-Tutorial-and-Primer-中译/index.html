<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>A vim Tutorial and Primer(中译) | Léo`s Blog</title>
  <meta name="author" content="Léo WENG">
  
  <meta name="description" content="VIM启蒙教程A vim Tutorial and Primer (原文链接)Vim as IDE / Vim作为IDE (Vim配置教程)
前言本文是”A vim Tutorial and Primer”中文翻译。鄙人在偶尔浏览到这篇博客，正值vim学习中，顾欲翻译之，以提高姿势水平。 在下才疏学浅，文笔欠佳，请多多见谅，如对内容有疑问请看原文。
目录[TOC]

介绍
为什么用Vim？
方法
配置
重映射大写锁键
用Pathogen来插件管理
用GitHub的备份和移动能力


把Vim当做一种语言


成为实践派
操作文件
搜索文本
文本内移动
修改文本
删除文本
撤销操作和恢复操作
重复之前的动作
拷贝和粘贴
检查拼写错误
替换文本


进阶
可重复过程
文本对象
虚拟模式
使用宏


小技巧
移除行尾的空格
改变文件类型
包裹内容
分屏操作
多标签页面


结论
参考文献


本教程的目标是教会你Vim每一个层次的内容– 从明白Vim的逻辑，到把你的能力提升到那些少数人的阶段。
介绍为什么用Vim？我认为有以下3点原因使人们想用vim:

它无所不在。在任何地方任何机器上你都能找到它。
它强大的扩展性。既可以当做文本编辑器，又可以作为编程写作的完整平台。
它功能强大。由于用起来像一门语音，vim可以很快使你从一个入门的使用者到受人膜拜的大神。简而言之，你可以把vim当成你上课学的一门外语，或者基本数学。但一切的一切都要从认识你的编辑器开始。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="A vim Tutorial and Primer(中译)"/>
  <meta property="og:site_name" content="Léo`s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.icon" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/flatly.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Léo`s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> A vim Tutorial and Primer(中译)</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="VIM启蒙教程"><a href="#VIM启蒙教程" class="headerlink" title="VIM启蒙教程"></a>VIM启蒙教程</h1><p><a href="https://danielmiessler.com/study/vim/" target="_blank" rel="noopener">A vim Tutorial and Primer (原文链接)</a><br><a href="https://github.com/yangyangwithgnu/use_vim_as_ide" target="_blank" rel="noopener">Vim as IDE / Vim作为IDE (Vim配置教程)</a></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>本文是”A vim Tutorial and Primer”中文翻译。鄙人在偶尔浏览到这篇博客，正值vim学习中，顾欲翻译之，以提高姿势水平。 在下才疏学浅，文笔欠佳，请多多见谅，如对内容有疑问请看原文。</p>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p>
<ul>
<li>介绍<ul>
<li>为什么用Vim？</li>
<li>方法</li>
<li>配置<ul>
<li>重映射大写锁键</li>
<li>用Pathogen来插件管理</li>
<li>用GitHub的备份和移动能力</li>
</ul>
</li>
<li>把Vim当做一种语言</li>
</ul>
</li>
<li>成为实践派<ul>
<li>操作文件</li>
<li>搜索文本</li>
<li>文本内移动</li>
<li>修改文本</li>
<li>删除文本</li>
<li>撤销操作和恢复操作</li>
<li>重复之前的动作</li>
<li>拷贝和粘贴</li>
<li>检查拼写错误</li>
<li>替换文本</li>
</ul>
</li>
<li>进阶<ul>
<li>可重复过程</li>
<li>文本对象</li>
<li>虚拟模式</li>
<li>使用宏</li>
</ul>
</li>
<li>小技巧<ul>
<li>移除行尾的空格</li>
<li>改变文件类型</li>
<li>包裹内容</li>
<li>分屏操作</li>
<li>多标签页面</li>
</ul>
</li>
<li>结论</li>
<li>参考文献</li>
</ul>
<hr>
<p>本教程的目标是教会你Vim每一个层次的内容– 从明白Vim的逻辑，到把你的能力提升到那些少数人的阶段。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><h2 id="为什么用Vim？"><a href="#为什么用Vim？" class="headerlink" title="为什么用Vim？"></a>为什么用Vim？</h2><p>我认为有以下3点原因使人们想用<code>vim</code>:</p>
<ol>
<li>它无所不在。在任何地方任何机器上你都能找到它。</li>
<li>它强大的扩展性。既可以当做文本编辑器，又可以作为编程写作的完整平台。</li>
<li>它功能强大。由于用起来像一门语音，vim可以很快使你从一个入门的使用者到受人膜拜的大神。<br>简而言之，你可以把vim当成你上课学的一门外语，或者基本数学。但一切的一切都要从认识你的编辑器开始。<a id="more"></a>
</li>
</ol>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p><a href="http://whileimautomaton.net/2008/11/vimm3/operator" target="_blank" rel="noopener">Kana the Wizard</a>说掌握Vim要经历5个阶段：</p>
<ul>
<li>Level0 ：不识Vim</li>
<li>Level1 ：知道基本Vim用法</li>
<li>Level2 ：知道虚拟模式用法</li>
<li>Level3 ：了解了各种姿势水平</li>
<li>Level4 ：不需要用虚拟模式</li>
</ul>
<p>我不知道是否正确，但我认为值得提一下这些概念。毕竟Kana是个大神。我主要介绍<code>vim</code>的四个主要内容：</p>
<ol>
<li>基本入门：让你思维走向正轨的基本热身。</li>
<li>变成实践派：这是熟肉。准备好吧，这些内容够你受得了。</li>
<li>进阶：在这里你将会成为会用<code>vim</code>的少数人。</li>
<li>常见问题：这里有一些很好用的小技巧。</li>
</ol>
<p>如果你已经入门了那直接看变成实践派的内容吧，如果你很熟悉Vim了那去进阶里学真功夫吧，如果你只是像找某个特定问题的解决办法去看看常见问题吧。<br>简而言之，安装、基本用法、’忍术‘、和常见的问题。从这些内容中找你需要的学吧。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>由于这是启蒙类教程所以不涉及太深入的配置内容。<br>笔者推荐读者自己安装和维护vim。vim安装在<code>~/.vim</code>目录下配置保存在<code>~/.vimc</code>文件下。</p>
<ul>
<li>一些重要配置更改<br>首先，<code>&lt;Eec&gt;</code>退出键用于退出插入模式，进入命令模式，以笔者观点来看是有点过时了。Vim即是效率，如果手能不离开键盘就尽量不离开键盘。笔者这里推荐用jk键组合代替退出：</li>
</ul>
<blockquote>
<p><code>inoremap jk &lt;Esc&gt;</code></p>
</blockquote>
<ul>
<li>冲设置领导键<br>领导键是用来激活缩写的键，其功能十分强大。例如如果你要用c键映射一个缩写那么你先键入你要缩写的键，之后键入领导键和c键。<br>默认的领导键为（<code>\</code>）这里笔者认为改为空格键<code>Space</code>更为合适。</li>
</ul>
<blockquote>
<p><code>let mapleader = &quot;\&lt;Space&gt;&quot;</code></p>
</blockquote>
<p>用空格更好理解也方便操作，因为你的拇指总是在空格键上。</p>
<h3 id="重映射大写锁键"><a href="#重映射大写锁键" class="headerlink" title="重映射大写锁键"></a>重映射大写锁键<capslock></capslock></h3><p>笔者认为键盘上的大写锁键capslock毫无意义所以重映射到<code>Ctrl</code>键</p>
<blockquote>
<p>filetype plugin indent on<br>syntax  on<br>set encoding = utf-8</p>
</blockquote>
<h3 id="用Pathogen来插件管理"><a href="#用Pathogen来插件管理" class="headerlink" title="用Pathogen来插件管理"></a>用Pathogen来插件管理</h3><p>你所需要做的是：</p>
<ol>
<li>安装Pathogen。</li>
<li><code>git clone</code> 需要的插件到<code>~/.vim/bundle</code></li>
<li>添加<code>execute pathogen#infect()</code>到<code>~/.vimc</code></li>
</ol>
<h3 id="用GitHub的备份和移动能力"><a href="#用GitHub的备份和移动能力" class="headerlink" title="用GitHub的备份和移动能力"></a>用GitHub的备份和移动能力</h3><p>笔者会把我配置好的Vim的整个文件夹<code>~/.vim</code>放在一个git仓库内，这样每当我换了终端时只要<code>git clone https://github.com/danielmiessler/vim</code> 就可以立刻得到我想要的整个Vim环境。</p>
<h2 id="把Vim当做一种语言"><a href="#把Vim当做一种语言" class="headerlink" title="把Vim当做一种语言"></a>把Vim当做一种语言</h2><p>可以说Vim最机智的一点是你用多了以后就开始以Vim的方式思考了。Vim是被像语言一样设计的，有名词、动词和副词。</p>
<ul>
<li><p>动词<br>动词是我们做的动作，动词可以作用于名词。例如：<br><code>d</code>: delete 删除<br><code>c</code>: change 修改<br><code>y</code>: yank 拷贝<br><code>v</code>: visually select 可见选择</p>
</li>
<li><p>修饰符<br>修饰符置于名词之前来描述你的动作的方式。例如：<br><code>i</code>: inside 内部的<br><code>a</code>: around 周围的<br><code>NUM</code>: number 数字的<br><code>t</code>: 找一些内容，停在它之前<br><code>f</code>: 找一些内容，停在它上<br><code>/</code>: 找到一个字符串(字符的或正则的)</p>
</li>
<li><p>名词<br>英语中名词是动作的对象。名词是对象，在vim中也一样。一些例子：<br><code>w</code>: word 词<br><code>s</code>: sentence 句子<br><code>)</code>: sentence 另一种句子写法<br><code>p</code>: paragraph 段落<br><code>}</code>: 段落另一种写法<br><code>t</code>: tag 标签<br><code>b</code>: block 闭包，区域</p>
</li>
<li><p>名词作为动作<br>名词也可以作为动作,作为移动内容距离的大小。</p>
</li>
<li><p>用Vim语言来造句<br>现在我们有了各种句子元素了，怎么造句？正如英语我们把名词、动词、修饰符直观的链接起来。</p>
</li>
</ul>
<p><strong>删除两个单词(Delete 2 words)</strong></p>
<blockquote>
<p><code>d2w</code></p>
</blockquote>
<p><strong>删除当前句子然后进入编辑模式(change inside sentence/delete current one and enter insider mode)</strong></p>
<blockquote>
<p><code>cis</code></p>
</blockquote>
<p><strong>拷贝你在的段落(yank inside paragraph)</strong></p>
<blockquote>
<p><code>yip</code></p>
</blockquote>
<p><strong>从你在的地方到下一个&lt;之内修改文本(change to &lt;)</strong></p>
<blockquote>
<p><code>ct&lt;</code> </p>
</blockquote>
<p>这里到下一个开尖括号可替换到下一个任何内容。到语法仅仅为<code>t</code>,我可以说<code>dt.</code>或<code>yt;</code>,意为删除到下一个句号和拷贝到下一个分号。</p>
<h1 id="成为实践派"><a href="#成为实践派" class="headerlink" title="成为实践派"></a>成为实践派</h1><p>在实践了一些基础内容之后，我们来上手更多深入的内容</p>
<h2 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h2><p><code>vi filename</code>:用vim打开文件<br><code>:w</code>:把改动写入(write)文件，即保存文件<br><code>:q!</code>:强行退出不保存(quit!)<br><code>:wq</code>:保存退出<br><code>:saveas ~/some/path/...</code>:另存为到指定地址</p>
<blockquote>
<p><code>ZZ</code>:是一种更快方式实现<code>:wq</code>的方法</p>
</blockquote>
<h2 id="搜索文本"><a href="#搜索文本" class="headerlink" title="搜索文本"></a>搜索文本</h2><p>学会使用文本编辑器的第一步就是快速找到你需要的文本。Vim有强大的文本搜索能力，接下来我们就具体谈一谈。</p>
<ul>
<li>搜索字符串(正则表达式搜索)<br>一个最基本的vim的文本搜索方法是输入<code>/</code>键之后页面下方出现正则搜索栏，在这里输入要搜索的表达式之后按回车即得到结果。</li>
</ul>
<p><strong>搜索include</strong> </p>
<blockquote>
<p><code>/include&lt;CR&gt;</code></p>
</blockquote>
<p>搜索结果如下：</p>
<p><img src="https://danielmiessler.com/images/vim_jump.jpg" alt="搜索结果"></p>
<p>搜索完成后，输入<code>n</code>到下一个结果的实列，或<code>N</code>到上一个结果。你也可以用<code>?</code>从你的位置向前搜索文本而不是默认的从光标位置向后搜索。</p>
<ul>
<li>跳转到某个字符<br>vim很酷的一个特性就是，从文本的任何地方，你都能找到并跳转到文本另一个特定字符的位置。<br>比如说，我在编辑HTML文件，我总是可以跳转到<code>&lt;</code>的位置也就是句子末尾的位置。</li>
</ul>
<p><strong>跳转到<code>&lt;</code>上</strong></p>
<blockquote>
<p><code>f&lt;</code></p>
</blockquote>
<p><strong>跳转到<code>&lt;</code>前</strong></p>
<blockquote>
<p><code>t&lt;</code></p>
</blockquote>
<p>可以这么理解，第一个是找到(find)所以是跳转到上，第二个是到(to)所以跳转到之前。</p>
<p><strong>更新到下一个<code>&lt;</code>之前到内容</strong></p>
<blockquote>
<p><code>ct&lt;</code></p>
</blockquote>
<p>这个适用于任何字符，比如标点符号、括号、正则表达式等。<br>注意：当用<code>t</code>或者<code>f</code>命令找到一个字符后，<code>;</code>转到下一个搜索结果，<code>,</code>转到上一个搜索结果。</p>
<p><strong>搜索文本总结</strong><br><code>/{string}</code>:找字符串<br><code>t</code>:跳转到字符前<br><code>f</code>:跳转到字符上<br><code>*</code>:找光标所在的单词的下一个实列<br><code>n</code>:执行找字符串之后，跳转到下一个结果实列<br><code>N</code>:执行找字符串之后，跳转到上一个结果实列<br><code>;</code>:执行跳转字符之后，跳转到下一个结果<br><code>,</code>:执行跳转字符之后，跳转到上一个结果</p>
<h2 id="文本内移动"><a href="#文本内移动" class="headerlink" title="文本内移动"></a>文本内移动</h2><p>在文本内快速移动对编辑效率至关重要。而Vim能简单且优雅的完成这项任务，凸显出其核心理念即vim是一门语言。</p>
<ul>
<li>基本动作<br>会打字的人右手基本都是放在<code>j,k,l,;</code>这几个键上的，这几个键对Vim也很重要。<br><code>j</code>:向下移动，下移一行<br><code>k</code>:向上移动，上移一行<br><code>h</code>:左移一个字符<br><code>l</code>:右移一个字符</li>
</ul>
<p>这上手可能有点别扭，但熟悉之后你会想在word里这么用。<br>你的食指和中指控制下和上，食指和四指控制左和右。</p>
<ul>
<li><p>行内移动<br>行内移动很方便<br><code>0</code>:移动到本行(光标所在的行)行首，即行的头。<br><code>$</code>:移动到行尾<br><code>^</code>:移动到本行第一个非空格字符上。</p>
</li>
<li><p>以一个单词为单位移动<br><code>w</code>:向前移动一个单词<br><code>b</code>:向后移动一个单词<br><code>e</code>:移动到当前单词的词尾位置</p>
</li>
</ul>
<p>当使用大写的上面的命令时，运行将无视定界字符，例如分号(;)等。<br><code>W</code>:向前移动一个整单词<br><code>B</code>:向后移动一个整单词</p>
<ul>
<li><p>以句子或段落为单位移动<br><code>(</code>:从光标位置向上移动一个句子。<br><code>)</code>:向下移动一个句子。<br><code>{</code>:向上移动一个段落。<br><code>}</code>:向下移动一个段落。</p>
</li>
<li><p>在屏幕显示的范围内移动<br><code>H</code>:移动到屏幕顶部<br><code>M</code>:移动到屏幕中间<br><code>L</code>:移动到屏幕底部<br><code>gg</code>:移动到文件头部<br><code>G</code>:移动到文件底部<br><code>^U</code>:上移半个频幕<br><code>^D</code>:下移半个频幕<br><code>^F</code>:上移动频幕页面<br><code>^B</code>:下移动频幕页面</p>
</li>
<li><p>向前向后跳转<br>在普通模式下在两个位置间跳转很容易<br><code>Ctrl-i</code>:跳到之前导航位置。<br><code>Ctrl-o</code>:跳到你原来的位置。</p>
</li>
<li><p>其它动作<br><code>:$行号</code>:移动到指定行。</p>
</li>
</ul>
<h2 id="修改文本"><a href="#修改文本" class="headerlink" title="修改文本"></a>修改文本</h2><p>我们已经学了不少文本移动光标操作；现在来学改变文本吧。首先我们要记住，我们总是要使用移动动作的，他们是这个语言的重要部分(修饰符)。</p>
<ul>
<li>认识模式<br><img src="https://danielmiessler.com/images/vim_modes.png" alt="模式"></li>
</ul>
<p>首先我们要掌握模式这个概念。当然开始你可能会觉得有些晦涩难懂，当你领会之后你就会习惯它的。大多数教程都是先开始讲解模式，但我觉得这样很不自然。从普通模式开始讲到插入模式的转折时我们再来讲就比较合适。</p>
<p><em>程序以普通模式开始</em>。最让初学者头疼的一件事就是你一打开vim时不能编辑，不能写任何东西的。普通模式也叫做命令模式，你在这个模式下输入命令。命令即是移动光标，删除等。之后便进入插入模式。</p>
<p><em>插入模式</em>是你修改文本的阶段。从普通模式有成吨的进入插入模式的方法。不用担心，在经常练习后你会熟悉它们的。</p>
<p><em>虚拟模式</em>是一种选择大段文本的方法。它很想普通模式，只不过光标移动改变选中的高亮显示。可以选多个字符或者多行。虚拟模式的意义是对选中内容同时进行操作。</p>
<p><em>执行模式</em>是在普通模式下输入<code>:</code>时在屏幕下方出现一行命令行。你可以在这里进行命令行操作。</p>
<ul>
<li>别忘了你的语言<br>让我们再回忆一下我们的语言：<em>动词</em>、<em>修饰符</em>、<em>名词</em>。假设我们从普通模式开始，现在将要进入插入模式。</li>
</ul>
<p>我们以动词开始，且有几个选择。我们可以改变(c)、插入(i)、或附加(a)并且可以在这些动作上添加变化。</p>
<ul>
<li>基本编辑／插入操作<br><code>i</code>:在光标前插入<br><code>a</code>:在光标后附加<br><code>I</code>:在行首插入<br><code>A</code>:在行尾附加<br><code>o</code>:在光标行下打开新一行，光标在新行首<br><code>O</code>:在光标行上打开新一行<br><code>r</code>:用r之后的一个字符替代光标所在的字符，之后还在普通模式<br><code>R</code>:用R之后的一串字符串替代光标所在位置之后的字符串，进入插入模式<br><code>c+movement</code>:改变你定义动作之内的内容<br><code>C</code>:改变一整行<br><code>ct?</code>:改变到问号之前<br><code>s</code>:替换光标位置开到下一个命令的内容<br><code>S</code>:替换光标所在的一整行</li>
</ul>
<p><strong>在句子中更改</strong></p>
<blockquote>
<p><code>cis</code></p>
</blockquote>
<p><strong>在光标所在的行首插入</strong></p>
<blockquote>
<p><code>I</code> </p>
</blockquote>
<p><strong>在光标位置后进入插入模式附加内容</strong></p>
<blockquote>
<p><code>a</code></p>
</blockquote>
<p>有很多的命令可以做多种动作，比如删除整行并进入插入模式</p>
<p><strong>删除光标所在位置之后的行内容且进入插入模式</strong></p>
<blockquote>
<p><code>C</code></p>
</blockquote>
<p><strong>删除光标所在的整行且进入插入模式</strong></p>
<blockquote>
<p><code>S</code></p>
</blockquote>
<ul>
<li><p>改变大小写<br><code>~</code>:对单个或者一组字符改变大小写</p>
</li>
<li><p>格式化文本<br>有时快速格式化一段文本很有用，比如格式化段落。</p>
</li>
</ul>
<p><strong>格式化当前段落</strong></p>
<blockquote>
<p><code>gq ap</code></p>
</blockquote>
<p><code>gq</code>根据你的文本宽度设定，把文本限制在这些界限内。<code>ap</code> 意思为在段落内(around paragraph )</p>
<h2 id="删除文本"><a href="#删除文本" class="headerlink" title="删除文本"></a>删除文本</h2><p>现在你已经知道怎么修改文本了，之后我们来看怎么删除文本。其实也是十分相同的，只要在语句中换不同的动词就好了。</p>
<ul>
<li>基本删除操作<br><code>x</code>:消灭光标所在的字符<br><code>X</code>:消灭光标位置之前的字符<br><code>d+movement</code>:删除一个动作，一个词，句子或者段落<br><code>dd</code>:删除光标所在的行<br><code>dt.</code>:删除到下个<code>.</code>号为止<br><code>D</code>:删除到行尾<br><code>J</code>:链接当前位置于下一行，删除之中的内容</li>
</ul>
<h2 id="撤销操作和恢复操作"><a href="#撤销操作和恢复操作" class="headerlink" title="撤销操作和恢复操作"></a>撤销操作和恢复操作</h2><p>撤销和恢复操作是文本编辑器必备功能。你应该注意到了，vim尽最大努力让键的操作很简单，撤销和恢复操作也一样。</p>
<p><code>u</code>:撤销上一次的操作<br><code>Ctrl-r</code>:恢复上一次撤销的操作</p>
<p>两个操作都可以重复多次，知道你撤销到最后保存到状态，或者恢复到你没有撤销之前的状态。</p>
<h2 id="重复之前的动作"><a href="#重复之前的动作" class="headerlink" title="重复之前的动作"></a>重复之前的动作</h2><p>vim有一个非常强大的命令符<code>.</code>,有点奇怪是不是。点操作符能让你实现聪明的操作，它重复你之前所做的动作。</p>
<p><strong>用<code>.</code>重复上一次的动作</strong><br>我们有很多任务会涉及到重复性的动作。例如，进入插入模式然后增加些文本。你能用<code>.</code>重复之前的动作到文本另一处再插入文本。</p>
<p><strong>删除一个单词，重复5次</strong></p>
<blockquote>
<p><code>dw</code><br><code>5.</code></p>
</blockquote>
<p>等他和虚拟模式一起使用的时候，你能发现他的强大功能。</p>
<h2 id="拷贝和粘贴"><a href="#拷贝和粘贴" class="headerlink" title="拷贝和粘贴"></a>拷贝和粘贴</h2><p>另一个编辑器必备功能是快速的拷贝粘贴，在这方面vim是大师。</p>
<p><strong>拷贝文本</strong><br>vim的拷贝指令有些不一般。并不是一遍期待的<code>c</code>而是<code>y</code>。<br><code>y</code>:拷贝光标之上或选中文本<br><code>yy</code>:拷贝整行</p>
<p><strong>剪切</strong><br>剪切和删除等同。实际上不管你用在什么语句中，你删除后的文本会被放在缓冲区，等待被粘贴。</p>
<p><strong>粘贴</strong><br>粘贴命令即是很直接的<code>p</code>命令，如果你使用<code>dd</code>删除了一行文本，你可以用<code>p</code>再粘贴回来。</p>
<p>关于粘贴还有一件事需要注意，内容将粘贴到你光标位置之后不论你将粘贴的是词、句子还是段落。如果出了错误，你当然可以用<code>u</code>命令撤销之前粘贴的内容。</p>
<ul>
<li>拷贝粘贴命令总结<br><code>y+movement</code>:拷贝内容，动作由movement决定<br><code>yy</code>:拷贝光标所在行<br><code>p</code>:光标位置之后粘贴内容<br><code>P</code>:光标位置之前粘贴内容</li>
</ul>
<p><strong>交换两行位置</strong></p>
<blockquote>
<p><code>ddp</code></p>
</blockquote>
<p>这是一个你用来交换两行文本的小技巧。首先你删除一行文本，使下一行为本上移，之后粘贴到上移文本之后，实现两行位置交换。</p>
<h2 id="检查拼写错误"><a href="#检查拼写错误" class="headerlink" title="检查拼写错误"></a>检查拼写错误</h2><p>如果编辑器不能进行拼写检查，会给我们带来很多麻烦。vim在这方面也很在行，所以不用担心。<br>首先在配置文件中加入以下设置：</p>
<p><strong>在配置文件中<code>~/.vimrc</code>加入</strong></p>
<blockquote>
<p><code>set spell spellang=en_us</code></p>
</blockquote>
<ul>
<li>定位拼写错误的文本<br>当你在配置文件中加入<code>set spell</code>项并开启，拼写错的单词就会被自动下划线，我们可以启用和关闭这一选项用<code>:set spell</code>和<code>set nospell</code>命令。</li>
</ul>
<p>一旦产生拼写错误，我们可以逐个访问这些单词，并且用下面动作修改。</p>
<p><strong>访问下一个错词，访问上一个错词</strong></p>
<blockquote>
<p><code>]s</code><br><code>[s</code></p>
</blockquote>
<p><strong>在错词上时vim给出修改意见</strong></p>
<blockquote>
<p><code>z=</code></p>
</blockquote>
<p><strong>把提示错误的单词添加为正确</strong></p>
<blockquote>
<p><code>zg</code></p>
</blockquote>
<p><strong>把没有提示错误的单词添加成错误</strong></p>
<blockquote>
<p><code>zw</code></p>
</blockquote>
<h2 id="替换文本"><a href="#替换文本" class="headerlink" title="替换文本"></a>替换文本</h2><p>vim的另一项强大特性是文本替换。首先指示你需要替换的文本，再指示替换内容，之后设定替换范围。<br>基本指令是<code>:%s</code></p>
<p><strong>在所有行里用bar替换foo</strong></p>
<blockquote>
<p><code>:%s /foo/bar/g</code></p>
</blockquote>
<p><strong>仅在光标所在行用bar替换foo</strong></p>
<blockquote>
<p><code>:s /foo/bar/g</code></p>
</blockquote>
<h1 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h1><p>太棒了。我们已经学习了很多文本编辑器的基本操作，和怎么用vim实现这些操作。现在就让我们探索一些更高深的内容吧-不过请谨记这些高深的内容也仅仅是初步的高深内容，要成为高手还要更加努力。</p>
<h2 id="可重复过程"><a href="#可重复过程" class="headerlink" title="可重复过程"></a>可重复过程</h2><p>之前我们讨论过用句点操作符快速实现可重复操作。但句点操作符只特别适用某一些操作，并且我们应该知道其中的区别和原因。</p>
<p>总的来说，使用句点操作符的实质是你的动作和可重复命令语句被句点操作符捕捉到。</p>
<p>举个例子，假如你要在多行行尾增加一点文本，但你只希望文本增加到包含有你指定字符串的行。你可以用如下操作：</p>
<p><strong>搜索指定字符串</strong></p>
<blockquote>
<p><code>/delinquent</code></p>
</blockquote>
<p>得到结果后，按<code>n</code>键可以移动到下一个结果的位置。从第一个开始我们附加文本。</p>
<p><strong>附加文本</strong></p>
<blockquote>
<p><code>A[DO NOT PAY] [Esc]</code></p>
</blockquote>
<p>已经完成一处到操作了。但还有其它位置的操作。句点操作符可以让我们重复之前的操作，因为之前搜索结果被储存了所以我可以结合两个操作。</p>
<p><strong>到下一个搜索结果，重复之前添加文本的操作</strong></p>
<blockquote>
<p><code>n.</code> (n是到下一个结果）</p>
</blockquote>
<p>记住重点是把移动和存储的命令结合起来，你就可以遍历结果重复命令了。</p>
<h2 id="文本对象"><a href="#文本对象" class="headerlink" title="文本对象"></a>文本对象</h2><p>文本对象很厉害。他让你用行为(动词)于更复杂的目标(名词)。因此你可以不用仅仅选择一个单词删除，或从句首删除一句，你可以从任何地方对这些’对象’操作。</p>
<p>这里看几个例子:</p>
<p><strong>单词文本对象</strong><br>我们先看几个以单词为基础的对象。<br><code>iw</code>:在单词内部<br><code>aw</code>:在单词周围</p>
<p>这些是目标(名词)，所以我们可以更改它们，删除它们等等。</p>
<p><strong>在单词周围删除</strong></p>
<blockquote>
<p><code>daw</code></p>
</blockquote>
<p>注意：在单词内和在单词周围的区别是包不包括跟着单词的下一个空格。比如上面的命令，执行之后删除单词和跟着单词的一个空格，而<code>diw</code>命令只删除单词不删除空格。</p>
<p><strong>句子文本对象</strong></p>
<p><code>is</code>:在句子之内<br><code>as</code>:在句子周围</p>
<p>这些内容和单词的很接近。比如你在一个句子内部时决定要删除这个句子从新写一句，你不需要返回句子开头删除，只需要用:</p>
<p><strong>在句子内部更改</strong></p>
<blockquote>
<p><code>cis</code></p>
</blockquote>
<p>这个命令删除一句并让你在新句子的句首进入插入模式编辑。</p>
<p><strong>其它的对象类型</strong></p>
<p>还有一些其他对象类型，这里简要提一下。<br><code>ip</code>和<code>ap</code>:段落对象<br><code>i&#39;</code>和<code>a&#39;</code>:单引号对象<br><code>i&quot;</code>和<code>a&quot;</code>:双引号对象</p>
<p>笔者经常使用这些命令编辑代码和HTML文本。重点是你不需要在命令执行的位置，告诉vim<code>ci&quot;</code>他就会删除双引号内所以东西并把你置于其中。所以这个功能用好之后很酷的。</p>
<p>同样以上内容可以用于包括小括号、中括号、大括号或HTML中的tags。</p>
<p>像一下这个场景，你在编辑HTML链接，URL在双引号中，link文本在tags中。你可以很优雅的编辑，仅仅用<code>ci&quot;</code>和<code>cit</code>命令。</p>
<p><strong>文本对象总结</strong></p>
<p><code>iw/aw</code>:单词<br><code>is/as</code>:句子<br><code>ip/ap</code>:段落<br><code>i&#39;/a&#39;</code>:单引号<br><code>i&quot;/a&quot;</code>:双引号<br>i<code>:撇号</code>i(/a(<code>:括号</code>i[/a[<code>:方括号</code>i{/a{<code>:大括号</code>it/at`:标签tags</p>
<h2 id="虚拟模式"><a href="#虚拟模式" class="headerlink" title="虚拟模式"></a>虚拟模式</h2><p><img src="https://danielmiessler.com/images/vim_visualselect.jpg" alt="虚拟模式"></p>
<p>虽然有很多vim技巧用好了会很让人崇拜，但没几个能像用好虚拟模式给人带来快乐的。<br>关于虚拟模式最重要的一点可能就是，它增强你现在所学内容的威力。它让你对选中的文本执行命令。</p>
<p>让我们从进入虚拟模式开始说起。用<code>v</code>进入虚拟模式，你还有其他一些选择。</p>
<p><code>v</code>:以字符为基础选择文本<br><code>V</code>:以行为基础<br><code>Ctrl-v</code>:以段落为基础</p>
<ul>
<li>在内部选择<br>你时常需要在某些区域内部选择一些文本比如逗号、句号、括号等内部。你能通过以下命令实现：</li>
</ul>
<p><strong>在括号内选择</strong></p>
<blockquote>
<p><code>vi(</code> 或者 <code>vi[</code></p>
</blockquote>
<p>如果有嵌套集合，你也可以通过增加数字实现选择特定内容。<br><strong>选择第二级括号内</strong></p>
<blockquote>
<p><code>v2i{</code></p>
</blockquote>
<ul>
<li><p>字符虚拟模式选择<br>我们从字符选择模式开始，你用这个虚拟模式选择一个或多个字符。笔者此种模式的使用机会远小于行选择模式，不过它仍然是一种有用的模式。<br>要注意的一点是，在选择模式下，你的动作会选择文本，所以你可以通过单词句子之类移动加快选择速度。被选中部分是接下来命令的目标。</p>
</li>
<li><p>行基虚拟模式<br>用<code>V</code>进入此模式选择文本，然后执行我们接下来要讨论的动作。</p>
</li>
<li><p>能对选择的文本做的动作<br>其实什么动作任你选，不过最主要的包括删除、拷贝和粘贴。你可以把它理解成你用鼠标多选区域的操作。</p>
</li>
</ul>
<p><strong>进入虚拟模式，选择两个单词，拷贝</strong></p>
<blockquote>
<p><code>vwwy</code></p>
</blockquote>
<p>之后到你想要粘贴它们的地方用<code>p</code>。</p>
<p>你还可以做一些行基操作<br><strong>进入虚拟模式，删除两行文本</strong></p>
<blockquote>
<p><code>Vjjd</code></p>
</blockquote>
<p>你也可以使用文本对象，虽然可能有些麻烦<br><strong>虚拟模式下选中一整段</strong></p>
<blockquote>
<p><code>vip</code></p>
</blockquote>
<p><strong>选中一整段复杂粘贴到其下</strong></p>
<blockquote>
<p><code>vipyjjp</code></p>
</blockquote>
<p>别觉得它太长，记住它是门语言。</p>
<ul>
<li>把虚拟模式于重复结合<br>另一个很酷的事情是结合虚拟模式于<code>.</code>，吧储存的命令用于一片选中的区域，例如。</li>
</ul>
<blockquote>
<p>foo<br>bar<br>thing<br>other<br>yetanother<br>also</p>
</blockquote>
<p>如果我们像在每一个单词前面增加一个<code>:</code>符号，我们可以先给第一个加上，虚拟模式选中剩下行然后按<code>.</code>键。</p>
<blockquote>
<p>:foo<br>:bar<br>:thing<br>:other<br>:yetanother<br>:also</p>
</blockquote>
<p>想象如果你的文件有6000行，用这个办法是不是很酷？<br><strong>给整个文件加<code>:</code>号</strong></p>
<blockquote>
<p><code>0i:j0vG.</code></p>
</blockquote>
<p>以下是解释：</p>
<ol>
<li>到行首插入一个:号</li>
<li>到下一行首</li>
<li>虚拟选中整个文件</li>
<li>增加:号</li>
</ol>
<h2 id="使用宏"><a href="#使用宏" class="headerlink" title="使用宏"></a>使用宏</h2><p>很多人听到宏就害怕。其实一点也不然，宏说到底就做一件事：纪录你做的动作，当你需要重做时，重放这些动作。<br><code>qa</code>:开始记录一个名为a的宏<br><code>q</code>:停止记录<br><code>@a</code>:重放宏</p>
<p>很简单吧。你可以把多个宏储存在多个存储器中”b”,”c”等等。使用时只要重放就好。</p>
<ul>
<li>为什么用宏<br>有些人会问:如果虚拟模式选择加上重复动作符点既然已经很强大了，为什么要用宏呢？<br>原因很复杂，但请知道宏可以做任何你能做的事情。请看如下的工作流：</li>
</ul>
<ol>
<li>在行内搜索”widget”</li>
<li>在此单词尾附加”-maker”</li>
<li>回到行首插入”:”</li>
<li>再到行尾附加上”.”</li>
<li>删除行尾多余的空格</li>
</ol>
<p>以上有很多的操作，如果你的文件有6万行的话，你可以要崩溃了。<br>在vim里你所要做的仅仅是在一行中完成以上动作，在剩下行里重放就好了。</p>
<p>注意：你可以在虚拟模式选中文本中执行宏，<code>:normal @a</code>命令使你进入普通模式，然后在选中的文本重放a里的命令。</p>
<h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><p>我们来给出一些经常被问到一些任务的处理方法。</p>
<h2 id="移除行尾的空格"><a href="#移除行尾的空格" class="headerlink" title="移除行尾的空格"></a>移除行尾的空格</h2><blockquote>
<p><code>:%s/\s\+$//</code></p>
</blockquote>
<h2 id="改变文件类型"><a href="#改变文件类型" class="headerlink" title="改变文件类型"></a>改变文件类型</h2><blockquote>
<p><code>set ft=unix</code><br><code>set ft=html</code><br><code>set ft=dos</code></p>
</blockquote>
<h2 id="包裹内容"><a href="#包裹内容" class="headerlink" title="包裹内容"></a>包裹内容</h2><p>使用”surround”插件操作包裹文本很方便。</p>
<p><code>cs&quot;&#39;</code>:把”换成’<br><code>cs&#39;&lt;q&gt;</code>:把’换成<code>&lt;q&gt;</code><br><code>ds&quot;</code>:把包裹号”删除<br><code>ysiw[</code>:用方括号包裹当前单词<br><code>ysiw&lt;em&gt;</code>:强调当前单词</p>
<h2 id="分屏操作"><a href="#分屏操作" class="headerlink" title="分屏操作"></a>分屏操作</h2><p><code>:vs [filename]</code>:左右分屏<br><code>:sp [fileename]</code>:上下分屏<br><code>:e path/filename</code>:启动一个新文件替换当前文件内容<br><code>:f filename</code>:将当前文件命名为filename</p>
<p><code>Ctrl+w+h,j,k,l</code>:上下作用移动切换屏幕焦点<br><code>Ctrl+w+w,p</code>:焦点移到下一个，上一个屏幕</p>
<p><code>Ctrl+w+c</code>:关闭焦点所在的屏<br><code>Ctrl+w+o</code>:关闭其他屏幕</p>
<h2 id="多标签页面"><a href="#多标签页面" class="headerlink" title="多标签页面"></a>多标签页面</h2><p><code>:tabnew [filename]</code>:打开新标签页，如果有文件名参数，则打开页面后载入文件<br><code>:tabc</code>:关闭当前标签页<br><code>:tabfir</code>:到第一个标签页<br><code>:tabl</code>:到最后一个标签页<br><code>:tabn</code>:到下一个标签页<br><code>:tabp</code>:到上一个标签页<br><code>:tabo</code>:除了当前的标签页，其他标签页全关闭</p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>还有两件事我想提一下。</p>
<ol>
<li>vim很好学习 </li>
<li>vim功能强大</li>
</ol>
<p>如果到目前为止能跟上并且能喜欢我们所学的基础那么说明你对文本更敏感，这可不是无关紧要的事。你越是对文本敏感，说明你对创意，观点很敏感，这是很棒的。</p>
<p>而这也是你为什么要熟练于文本编辑器的原因。让你更自然，更游刃有余的发现点子，记录想法，而不是被编辑器妨碍。</p>
<p>或者你也许并不在乎点子，只想成为那些编辑起文件来让其他人惊叹的人。不管哪种，我希望你会觉得本文有用处。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ol>
<li>推荐一本 Drew Neil 的书 《Practical Vim: Edit Text at the Speed of Thought》。对于一个真正喜欢vim的人是本必备。</li>
<li>强烈推荐看 “Your Problem with vim is  that you don’t grok vi”,其中给出了很多技巧。</li>
<li>如果你没看过Steve Losh的《Coming Home to Vim》我推荐看一看。</li>
<li>当然要看看Kana the Wizard’s的《True Power of Vim》。</li>
<li>Vim Quick Reference这里有简洁的命令行总结。</li>
<li>当然别忘了the Vim Wiki。</li>
<li>Openvim的This is a really well done interactive tutorial。</li>
<li>当然还Vim自己的帮助文档。</li>
</ol>
	  
	</div>

	<!-- recommended posts -->
	

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2016/10/10/SublimeText-Latex-ConfigurationOnMac/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2016/09/11/Design-Patterns/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        

        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>
  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-09-27 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
	

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->

<script type="text/javascript">
var disqus_shortname = 'leoweng';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 Léo WENG
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
   </html>
